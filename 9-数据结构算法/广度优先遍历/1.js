

/*
 * @Description: 
 * @Author: xlm
 * @Date: 2023-11-02 12:01:26
 * @LastEditTime: 2023-11-02 12:07:45
 * @LastEditors: xlm
 */


let company = [
  {
      "id": "-1",
      "parentId": "0",
      "weight": -2147483648,
      "name": "正观易知云图书馆1111",
      "createTime": null,
      "memberCount": 699,
      "children": [
          {
              "id": "102",
              "parentId": "-1",
              "weight": 0,
              "name": "33",
              "createTime": "2023-07-03 18:46:08",
              "memberCount": null,
              "children": [
                  {
                      "id": "5102",
                      "parentId": "102",
                      "weight": 0,
                      "name": "虾米部门随机一段废话的发生, 到底需要如何做到, 不随机一段废话的发生, 又会如",
                      "createTime": "2023-07-20 10:43:56",
                      "memberCount": null,
                      "children": [
                          {
                              "id": "5103",
                              "parentId": "5102",
                              "weight": 0,
                              "name": "虾米分部1",
                              "createTime": "2023-07-20 10:44:52",
                              "memberCount": null,
                              "children": [
                                  {
                                      "id": "5101",
                                      "parentId": "5103",
                                      "weight": 0,
                                      "name": "56",
                                      "createTime": "2023-07-20 10:39:30",
                                      "memberCount": null
                                  },
                                  {
                                      "id": "11104",
                                      "parentId": "5103",
                                      "weight": 0,
                                      "name": "111",
                                      "createTime": "2023-07-24 17:16:44",
                                      "memberCount": null
                                  },
                                  {
                                      "id": "12101",
                                      "parentId": "5103",
                                      "weight": 0,
                                      "name": "分身",
                                      "createTime": "2023-07-24 18:29:55",
                                      "memberCount": null
                                  }
                              ]
                          },
                          {
                              "id": "11105",
                              "parentId": "5102",
                              "weight": 0,
                              "name": "虾米分部003",
                              "createTime": "2023-07-24 17:22:21",
                              "memberCount": null
                          },
                          {
                              "id": "11108",
                              "parentId": "5102",
                              "weight": 0,
                              "name": "虾米部门1",
                              "createTime": "2023-07-24 17:49:17",
                              "memberCount": null
                          },
                          {
                              "id": "11110",
                              "parentId": "5102",
                              "weight": 0,
                              "name": "分身",
                              "createTime": "2023-07-24 18:09:28",
                              "memberCount": null
                          },
                          {
                              "id": "12109",
                              "parentId": "5102",
                              "weight": 0,
                              "name": "测试1",
                              "createTime": "2023-07-25 09:25:57",
                              "memberCount": null,
                              "children": [
                                  {
                                      "id": "45101",
                                      "parentId": "12109",
                                      "weight": 0,
                                      "name": "22",
                                      "createTime": "2023-08-29 17:12:11",
                                      "memberCount": null
                                  }
                              ]
                          },
                          {
                              "id": "13113",
                              "parentId": "5102",
                              "weight": 0,
                              "name": "虾米部门2",
                              "createTime": "2023-07-25 10:23:12",
                              "memberCount": null,
                              "children": [
                                  {
                                      "id": "13114",
                                      "parentId": "13113",
                                      "weight": 0,
                                      "name": "虾米部门3",
                                      "createTime": "2023-07-25 10:23:12",
                                      "memberCount": null,
                                      "children": [
                                          {
                                              "id": "13115",
                                              "parentId": "13114",
                                              "weight": 0,
                                              "name": "虾米部门4",
                                              "createTime": "2023-07-25 10:23:12",
                                              "memberCount": null
                                          }
                                      ]
                                  },
                                  {
                                      "id": "16102",
                                      "parentId": "13113",
                                      "weight": 0,
                                      "name": "虾米部门2-2",
                                      "createTime": "2023-07-31 13:47:18",
                                      "memberCount": null
                                  }
                              ]
                          },
                          {
                              "id": "19103",
                              "parentId": "5102",
                              "weight": 0,
                              "name": "测试部门",
                              "createTime": "2023-08-01 11:28:36",
                              "memberCount": null,
                              "children": [
                                  {
                                      "id": "19104",
                                      "parentId": "19103",
                                      "weight": 0,
                                      "name": "aaa",
                                      "createTime": "2023-08-01 11:28:36",
                                      "memberCount": null
                                  }
                              ]
                          }
                      ]
                  },
                  {
                      "id": "9101",
                      "parentId": "102",
                      "weight": 0,
                      "name": "松彬部门",
                      "createTime": "2023-07-21 11:04:26",
                      "memberCount": null,
                      "children": [
                          {
                              "id": "19101",
                              "parentId": "9101",
                              "weight": 0,
                              "name": "测试部门",
                              "createTime": "2023-08-01 11:27:09",
                              "memberCount": null
                          }
                      ]
                  },
                  {
                      "id": "12110",
                      "parentId": "102",
                      "weight": 0,
                      "name": "测试2",
                      "createTime": "2023-07-25 09:30:43",
                      "memberCount": null
                  },
                  {
                      "id": "12112",
                      "parentId": "102",
                      "weight": 0,
                      "name": "虾米测试2",
                      "createTime": "2023-07-25 09:50:36",
                      "memberCount": null,
                      "children": [
                          {
                              "id": "13101",
                              "parentId": "12112",
                              "weight": 0,
                              "name": "测试2分部1",
                              "createTime": "2023-07-25 10:14:36",
                              "memberCount": null,
                              "children": [
                                  {
                                      "id": "13102",
                                      "parentId": "13101",
                                      "weight": 0,
                                      "name": "测试2分部下级",
                                      "createTime": "2023-07-25 10:14:36",
                                      "memberCount": null
                                  }
                              ]
                          }
                      ]
                  },
                  {
                      "id": "13103",
                      "parentId": "102",
                      "weight": 0,
                      "name": "虾米测试3",
                      "createTime": "2023-07-25 10:16:31",
                      "memberCount": null,
                      "children": [
                          {
                              "id": "13104",
                              "parentId": "13103",
                              "weight": 0,
                              "name": "虾米测试3分部",
                              "createTime": "2023-07-25 10:16:31",
                              "memberCount": null
                          }
                      ]
                  },
                  {
                      "id": "19102",
                      "parentId": "102",
                      "weight": 0,
                      "name": "aaa",
                      "createTime": "2023-08-01 11:27:09",
                      "memberCount": null
                  },
                  {
                      "id": "21101",
                      "parentId": "102",
                      "weight": 0,
                      "name": "哈哈哈",
                      "createTime": "2023-08-07 16:11:51",
                      "memberCount": null
                  },
                  {
                      "id": "31101",
                      "parentId": "102",
                      "weight": 0,
                      "name": "000001111222222222222222233333",
                      "createTime": "2023-08-11 14:25:54",
                      "memberCount": null
                  },
                  {
                      "id": "43103",
                      "parentId": "102",
                      "weight": 0,
                      "name": "57",
                      "createTime": "2023-08-21 19:29:56",
                      "memberCount": null
                  },
                  {
                      "id": "50105",
                      "parentId": "102",
                      "weight": 0,
                      "name": "请问请问请问请问请问请问请问请问请",
                      "createTime": "2023-09-20 10:35:01",
                      "memberCount": null
                  },
                  {
                      "id": "50106",
                      "parentId": "102",
                      "weight": 0,
                      "name": "11111111111111111",
                      "createTime": "2023-09-20 10:35:53",
                      "memberCount": null
                  }
              ]
          },
          {
              "id": "103",
              "parentId": "-1",
              "weight": 0,
              "name": "地龙二部",
              "createTime": null,
              "memberCount": null,
              "children": [
                  {
                      "id": "58107",
                      "parentId": "103",
                      "weight": 0,
                      "name": "地龙二部",
                      "createTime": "2023-10-25 13:06:06",
                      "memberCount": null
                  }
              ]
          },
          {
              "id": "51101",
              "parentId": "-1",
              "weight": 0,
              "name": "虾米分部15555555555555555555555",
              "createTime": "2023-09-20 19:15:12",
              "memberCount": null
          },
          {
              "id": "51103",
              "parentId": "-1",
              "weight": 0,
              "name": "1",
              "createTime": "2023-09-20 19:20:25",
              "memberCount": null
          },
      ]
  }
]

let getSubDeptId = (arr, id)=>{
  let ids = [];
  // 队列
  let queue = [...arr];
  while (queue.length) {
    let element = queue.shift();
    if(element.id == id && element.children){
      let queue2 = [...element.children];
      // 全部子部门的id
      while (queue2.length) {
        let element2 = queue2.shift();
        ids.push(element2.id);
        if (element2.children) {
          queue2.push(...element2.children);
        }
      }
      // break;
      return ids;
    } 
    if (element.children) {
      // 入队
      queue.push(...element.children);
    }
  } 
  return ids;
}  

console.log("子部门id:", getSubDeptId(company, 5103));